name: Team Intro

on:
  workflow_dispatch:
    inputs:
      reset:
        description: 'Reset README before running?'
        type: boolean
        default: true

permissions:
  contents: write

jobs:
  reset:
    if: ${{ inputs.reset == true }}
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          ref: main
      - name: Recreate demo branch from main
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git checkout -B demo
          echo "" > README.md
          git add README.md
          git commit -m "reset: clean README"
          git push origin demo --force

  who-i-am:
    needs: [reset]
    if: always() && !failure() && !cancelled()
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          ref: demo
      - name: Pull latest
        run: git pull origin demo
      - name: Update Job Summary
        run: |
          echo "## ðŸ‘‹ Who I Am" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**Jash** â€” SWE2, GitHub Actions Compute & Storage" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "ðŸ“ Redmond, WA | ðŸŽ“ MS CS, ASU | âš¡ F1 fan & Karting enthusiast" >> $GITHUB_STEP_SUMMARY
      - name: Update README
        run: |
          cat >> README.md << 'EOF'
          # Hi, I'm Jash!
          ### Software Engineer 2 â€” GitHub Actions Compute & Storage
          [![GitHub Actions](https://img.shields.io/badge/GitHub%20Actions-2088FF?logo=githubactions&logoColor=white&style=for-the-badge)](https://github.com/features/actions)
          [![Microsoft](https://img.shields.io/badge/Microsoft-0078D4?logo=microsoft&logoColor=white&style=for-the-badge)](https://microsoft.com)
          [![Formula 1](https://img.shields.io/badge/Formula%201-E8002D?logo=f1&logoColor=white&style=for-the-badge)](https://www.formula1.com)
          > Here to build things that make developers faster.
          *(and occasionally embarrass myself at karting tracks)*
          ðŸ“ **Redmond, WA** â€” Bellevue Hub regular
          ðŸŽ“ **MS Computer Science** â€” Arizona State University
          ðŸŽï¸ **Fun fact** â€” Huge F1 fan. Yes I do think I could beat my teammates in a kart. No I have not been proven wrong yet.
          EOF
      - name: Commit and push
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add README.md
          git commit -m "intro: add who-i-am"
          git push
      - name: Preview README so far
        run: cat README.md      

  my-journey:
    needs: [who-i-am]
    if: always() && !failure() && !cancelled()
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          ref: demo
      - name: Pull latest
        run: git pull origin demo
      - name: Pause for commentary
        run: |
          echo "Let me walk you through how I got here..."
          sleep 10
      - name: Update Job Summary
        run: |
          echo "## ðŸ—ºï¸ My Journey" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "| | Role | Vibe |" >> $GITHUB_STEP_SUMMARY
          echo "|---|---|---|" >> $GITHUB_STEP_SUMMARY
          echo "| ðŸ”¬ | LEAPS Lab @ ASU | Built backend for power systems optimizations + led AI initiatives  |" >> $GITHUB_STEP_SUMMARY
          echo "| ðŸ“¦ | Microsoft DevBox | Joined Dec 2025 â€” onboarding, getting access, filing more tickets to get more access |" >> $GITHUB_STEP_SUMMARY
          echo "| âš¡ | GitHub Actions C&S | Came over with the team in the reorg â€” and honestly could not be happier about it |" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
      - name: Update README
        run: |
          cat >> README.md << 'EOF'
          ---
          ## My Journey
          | | Role | What I did | Vibe |
          |---|---|---|---|
          | ðŸ”¬ | **LEAPS Lab @ ASU** | Built backend for power systems optimizations + led AI initiatives |
          | ðŸ“¦ | **Microsoft DevBox** | Joined Dec 2025 â€” onboarding, getting access, filing more tickets to get more access |
          | âš¡ | **GitHub Actions C&S** | Came over with the team in the reorg â€” and honestly could not be happier about it |
          EOF
      - name: Commit and push
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add README.md
          git commit -m "intro: add my-journey"
          git push
      - name: Preview README so far
        run: cat README.md

  what-ive-shipped:
    needs: [my-journey]
    if: always() && !failure() && !cancelled()
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          ref: demo
      - name: Pull latest
        run: git pull origin demo
      - name: Pause for commentary
        run: |
          echo "Here's what I've been up to..."
          sleep 10
      - name: Update Job Summary
        run: |
          echo "## ðŸš€ What I've Shipped" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "| Feature | Repos |" >> $GITHUB_STEP_SUMMARY
          echo "|---|---|" >> $GITHUB_STEP_SUMMARY
          echo "| ðŸ–¼ï¸ Runner pool image editing | github, github-ui, launch, actions-dotnet | if you change your mind later? I got you |" >> $GITHUB_STEP_SUMMARY
          echo "| ðŸ“¸ Snapshot versioning | actions-proto, actions-broker-worker, actions-run-service, actions-dotnet | Atleast support will now know you tried to sneak in the "snapshot" keyword |" >> $GITHUB_STEP_SUMMARY
          echo "| ðŸ§¹ Feature flag cleanup | github | I said "Clean-up", and my my mom was already proud |" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**22 PRs across 9 repos** *(anyone else weirdly obsessed with green boxes?)*" >> $GITHUB_STEP_SUMMARY
      - name: Update README
        run: |
          cat >> README.md << 'EOF'
          ---
          ## ðŸš€ What I've Shipped
          | Feature | Repos |
          |---|---|
          | ðŸ–¼ï¸ Runner pool image editing | github, github-ui, launch, actions-dotnet | if you change your mind later? I got you |
          | ðŸ“¸ Snapshot versioning | actions-proto, actions-broker-worker, actions-run-service, actions-dotnet | Atleast support will now know you tried to sneak in the "snapshot" keyword |
          | ðŸ§¹ Feature flag cleanup | github | I said "Clean-up", and my my mom was already proud |
          ---
          **22 PRs across 9 repos** *(anyone else weirdly obsessed with green boxes?)*
          EOF
      - name: Commit and push
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add README.md
          git commit -m "intro: add what-ive-shipped"
          git push
      - name: Preview README so far
        run: cat README.md

  what-excites-me:
    needs: [what-ive-shipped]
    if: always() && !failure() && !cancelled()
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          ref: demo
      - name: Pull latest
        run: git pull origin demo
      - name: Pause for commentary
        run: |
          echo "And here's what gets me excited..."
          sleep 25
      - name: Update Job Summary
        run: |
          echo "## âš¡ What Excites Me" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ—ï¸ **Infrastructure at scale** â€” who does not have the urge to refactor the whole infrastructure?" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ§‘â€ðŸ’» **Developer Experience** â€” if a dev is frustrated, that is a bug. Full stop." >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ”­ **Learning the full compute pipeline** â€” still connecting dots, loving every minute, will annoy everyone with silly questions" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ¤ **This team** â€” excited to build with everyone â€” came over in the reorg and immediately felt at home (also did I mention slack reactions are just adorable?)" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "---" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "*Built with GitHub Actions, naturally.* ðŸ˜„" >> $GITHUB_STEP_SUMMARY
          echo "*Because what better way to introduce yourself to the Actions team?*" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "[![GitHub](https://img.shields.io/badge/github-jashkahar-181717?logo=github&style=flat-square)](https://github.com/jashkahar)" >> $GITHUB_STEP_SUMMARY
      - name: Update README
        run: |
          cat >> README.md << 'EOF'
          ---
          ## What Excites Me
          - ðŸ—ï¸ Infrastructure at scale - who does not have the urge to refactor the whole infrastructure?
          - ðŸ§‘â€ðŸ’» Developer Experience - if a dev is frustrated, that is a bug. Full stop.
          - ðŸ”­ Learning the full compute pipeline - still connecting dots, loving every minute, will annoy everyone with silly questions
          - ðŸ¤ This team â€” excited to build with everyone - came over in the reorg and immediately felt at home (also did I mention slack reactions are just adorable?)
          ---

          <div align="center">

          *This README was built live by a GitHub Actions workflow.*
          *Because what better way to introduce yourself to the Actions team?* ðŸ˜„

          [![Built with Actions](https://img.shields.io/badge/Built%20with-GitHub%20Actions-2088FF?logo=githubactions&logoColor=white&style=for-the-badge)](https://github.com/jashkahar/hello-actions-team/actions/workflows/intro.yml)
          [![Say Hi](https://img.shields.io/badge/Say%20Hi-jashkahar-181717?logo=github&logoColor=white&style=for-the-badge)](https://github.com/jashkahar)

          </div>

          EOF
      - name: Commit and push
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add README.md
          git commit -m "intro: add what-excites-me"
          git push
      - name: Preview README so far
        run: cat README.md