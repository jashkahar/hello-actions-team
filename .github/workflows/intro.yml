name: Team Intro

on:
  workflow_dispatch:
    inputs:
      reset:
        description: 'Reset README before running?'
        type: boolean
        default: true

permissions:
  contents: write

jobs:
  reset:
    if: ${{ inputs.reset == true }}
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          ref: main
      - name: Recreate demo branch from main
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git checkout -B demo
          echo "" > README.md
          git add README.md
          git commit -m "reset: clean README"
          git push origin demo --force

  who-i-am:
    needs: [reset]
    if: always() && !failure() && !cancelled()
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          ref: demo
      - name: Pull latest
        run: git pull origin demo
      - name: Update README
        run: |
          cat >> README.md << 'EOF'
          # Hi, I'm Jash!
          ### Software Engineer 2 â€” GitHub Actions Compute & Storage
          > Here to build things that make developers faster.
          - Redmond, WA
          - MS Computer Science â€” Arizona State University
          - Fun fact: I am a huge Formula 1 fan and love to do Karting!
          EOF
      - name: Pause for commentary
        run: |
          echo "Let me introduce myself..."
          sleep 20
      - name: Commit and push
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add README.md
          git commit -m "intro: add who-i-am"
          git push
      - name: Preview README so far
        run: cat README.md
      - name: Update Job Summary
        run: |
          echo "## ðŸ‘‹ Who I Am" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**Jash** â€” SWE2, GitHub Actions Compute & Storage" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "ðŸ“ Redmond, WA | ðŸŽ“ MS CS, ASU | âš¡ F1 fan & Karting enthusiast" >> $GITHUB_STEP_SUMMARY      

  my-journey:
    needs: [who-i-am]
    if: always() && !failure() && !cancelled()
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          ref: demo
      - name: Pull latest
        run: git pull origin demo
      - name: Update README
        run: |
          cat >> README.md << 'EOF'
          ---
          ## My Journey
          - **LEAPS Lab @ ASU** â€” Built backend for power systems optimizations and led AI initiatives
          - **Microsoft DevBox** â€” Joined Dec 2025
          - **GitHub Actions C&S** â€” Came over with the team during the reorg
          EOF
      - name: Pause for commentary
        run: |
          echo "Let me walk you through how I got here..."
          sleep 20
      - name: Commit and push
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add README.md
          git commit -m "intro: add my-journey"
          git push
      - name: Preview README so far
        run: cat README.md
      - name: Update Job Summary
        run: |
          echo "## ðŸ—ºï¸ My Journey" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "ðŸ”¬ LEAPS Lab ASU â†’ ðŸ“¦ Microsoft DevBox â†’ âš¡ GitHub Actions C&S" >> $GITHUB_STEP_SUMMARY

  what-ive-shipped:
    needs: [my-journey]
    if: always() && !failure() && !cancelled()
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          ref: demo
      - name: Pull latest
        run: git pull origin demo
      - name: Update README
        run: |
          cat >> README.md << 'EOF'
          ---
          ## What I've Shipped (under 2 months in)
          - Runner pool image editing
          - Snapshot versioning
          - Feature flag cleanup
          - 22 PRs merged across 9 repos
          EOF
      - name: Pause for commentary
        run: |
          echo "Here's what I've been up to..."
          sleep 20
      - name: Commit and push
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add README.md
          git commit -m "intro: add what-ive-shipped"
          git push
      - name: Preview README so far
        run: cat README.md
      - name: Update Job Summary
        run: |
          echo "## ðŸš€ What I've Shipped" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "- Runner pool image editing" >> $GITHUB_STEP_SUMMARY
          echo "- Snapshot versioning" >> $GITHUB_STEP_SUMMARY
          echo "- Feature flag cleanup" >> $GITHUB_STEP_SUMMARY
          echo "- **22 PRs across 9 repos in under 2 months**" >> $GITHUB_STEP_SUMMARY

  what-excites-me:
    needs: [what-ive-shipped]
    if: always() && !failure() && !cancelled()
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          ref: demo
      - name: Pull latest
        run: git pull origin demo
      - name: Update README
        run: |
          cat >> README.md << 'EOF'
          ---
          ## What Excites Me
          - Infrastructure at scale
          - Developer Experience
          - Learning the full compute pipeline
          - This team â€” excited to build with everyone
          ---
          *This README was built live by a GitHub Actions workflow.*
          EOF
      - name: Pause for commentary
        run: |
          echo "And here's what gets me excited..."
          sleep 25
      - name: Commit and push
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add README.md
          git commit -m "intro: add what-excites-me"
          git push
      - name: Preview README so far
        run: cat README.md
      - name: Update Job Summary
        run: |
          echo "## âš¡ What Excites Me" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "- Infrastructure at scale" >> $GITHUB_STEP_SUMMARY
          echo "- Developer Experience" >> $GITHUB_STEP_SUMMARY
          echo "- Learning the full compute pipeline" >> $GITHUB_STEP_SUMMARY
          echo "- This team â€” excited to build with everyone" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "---" >> $GITHUB_STEP_SUMMARY
          echo "*Built with GitHub Actions, naturally.*" >> $GITHUB_STEP_SUMMARY